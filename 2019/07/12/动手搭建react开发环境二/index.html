<!DOCTYPE html>


  <html class="light page-post">


<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>åŠ¨æ‰‹æ­å»ºreactå¼€å‘ç¯å¢ƒäºŒ | Hzzly</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="éšç¬”,webpack,react,">
  

  <meta name="description" content="ç‰ˆæœ¬ webpack 4 Babel 7   æœ¬ç¯‡ä¸»è¦ä½¿ç”¨é’ˆå¯¹ä¸Šç¯‡çš„webpacké…ç½®è¿›è¡Œä¼˜åŒ–  å¿«é€Ÿæµè§ˆï¼š webpackåŸºç¡€ç¯‡  webpackä¼˜åŒ–1ã€æŠ½å–cssï¼ˆMiniCssExtractPluginï¼‰ä¸ºæ¯ä¸ªå¼•å…¥ CSS çš„ JS æ–‡ä»¶åˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œæé«˜é¦–é¡µåŠ è½½é€Ÿåº¦  æŠŠ style-loader æ›¿æ¢æˆ MiniCssExtractPlugin.loader æ–°å¢ plugin">
<meta name="keywords" content="éšç¬”,webpack,react">
<meta property="og:type" content="article">
<meta property="og:title" content="åŠ¨æ‰‹æ­å»ºreactå¼€å‘ç¯å¢ƒäºŒ">
<meta property="og:url" content="http://yoursite.com/2019/07/12/åŠ¨æ‰‹æ­å»ºreactå¼€å‘ç¯å¢ƒäºŒ/index.html">
<meta property="og:site_name" content="Hzzly">
<meta property="og:description" content="ç‰ˆæœ¬ webpack 4 Babel 7   æœ¬ç¯‡ä¸»è¦ä½¿ç”¨é’ˆå¯¹ä¸Šç¯‡çš„webpacké…ç½®è¿›è¡Œä¼˜åŒ–  å¿«é€Ÿæµè§ˆï¼š webpackåŸºç¡€ç¯‡  webpackä¼˜åŒ–1ã€æŠ½å–cssï¼ˆMiniCssExtractPluginï¼‰ä¸ºæ¯ä¸ªå¼•å…¥ CSS çš„ JS æ–‡ä»¶åˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œæé«˜é¦–é¡µåŠ è½½é€Ÿåº¦  æŠŠ style-loader æ›¿æ¢æˆ MiniCssExtractPlugin.loader æ–°å¢ plugin">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-07-12T02:32:43.027Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="åŠ¨æ‰‹æ­å»ºreactå¼€å‘ç¯å¢ƒäºŒ">
<meta name="twitter:description" content="ç‰ˆæœ¬ webpack 4 Babel 7   æœ¬ç¯‡ä¸»è¦ä½¿ç”¨é’ˆå¯¹ä¸Šç¯‡çš„webpacké…ç½®è¿›è¡Œä¼˜åŒ–  å¿«é€Ÿæµè§ˆï¼š webpackåŸºç¡€ç¯‡  webpackä¼˜åŒ–1ã€æŠ½å–cssï¼ˆMiniCssExtractPluginï¼‰ä¸ºæ¯ä¸ªå¼•å…¥ CSS çš„ JS æ–‡ä»¶åˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œæé«˜é¦–é¡µåŠ è½½é€Ÿåº¦  æŠŠ style-loader æ›¿æ¢æˆ MiniCssExtractPlugin.loader æ–°å¢ plugin">

  

  
    <link rel="icon" href="/images/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38189205-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  

</head>
</html>
<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">å¯¼èˆª</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">å¯¼èˆª</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/archives/" rel="noopener noreferrer" target="_self">
            åšå®¢
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/tag/" rel="noopener noreferrer" target="_self">
            æ ‡ç­¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/link/" rel="noopener noreferrer" target="_self">
            å‹é“¾
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/about/" rel="noopener noreferrer" target="_self">
            å…³äº
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/atom.xml" rel="noopener noreferrer" target="_blank">
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/search/" rel="noopener noreferrer" target="_self">
            æœç´¢
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ç‰ˆæœ¬"><span class="toc-text">ç‰ˆæœ¬</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å¿«é€Ÿæµè§ˆï¼š"><span class="toc-text">å¿«é€Ÿæµè§ˆï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpackä¼˜åŒ–"><span class="toc-text">webpackä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1ã€æŠ½å–cssï¼ˆMiniCssExtractPluginï¼‰"><span class="toc-text">1ã€æŠ½å–cssï¼ˆMiniCssExtractPluginï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2ã€å‹ç¼©CSSï¼ˆOptimizeCssAssetsWebpackPluginï¼‰"><span class="toc-text">2ã€å‹ç¼©CSSï¼ˆOptimizeCssAssetsWebpackPluginï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3ã€å‹ç¼©JS"><span class="toc-text">3ã€å‹ç¼©JS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4ã€ä»£ç åˆ†å‰²ï¼ˆSplitChunksPluginï¼‰"><span class="toc-text">4ã€ä»£ç åˆ†å‰²ï¼ˆSplitChunksPluginï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5ã€é…ç½®å…¨å±€å˜é‡"><span class="toc-text">5ã€é…ç½®å…¨å±€å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6ã€CSS-Tree-Shaking"><span class="toc-text">6ã€CSS Tree Shaking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7ã€JS-Tree-Shaking"><span class="toc-text">7ã€JS Tree Shaking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8ã€resolveï¼ˆè§£æï¼‰"><span class="toc-text">8ã€resolveï¼ˆè§£æï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9ã€æ¨¡å—çƒ­æ›¿æ¢HMR"><span class="toc-text">9ã€æ¨¡å—çƒ­æ›¿æ¢HMR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10ã€BundleAnalyzerPlugin"><span class="toc-text">10ã€BundleAnalyzerPlugin</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpackåˆ†ç¦»é…ç½®æ–‡ä»¶"><span class="toc-text">webpackåˆ†ç¦»é…ç½®æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1ã€æå–å…¬å…±é…ç½®"><span class="toc-text">1ã€æå–å…¬å…±é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2ã€é…ç½®å¼€å‘ç¯å¢ƒ"><span class="toc-text">2ã€é…ç½®å¼€å‘ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3ã€é…ç½®å‘å¸ƒç¯å¢ƒ"><span class="toc-text">3ã€é…ç½®å‘å¸ƒç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4ã€ä¿®æ”¹scriptå‘½ä»¤è¡Œ"><span class="toc-text">4ã€ä¿®æ”¹scriptå‘½ä»¤è¡Œ</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-åŠ¨æ‰‹æ­å»ºreactå¼€å‘ç¯å¢ƒäºŒ" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">åŠ¨æ‰‹æ­å»ºreactå¼€å‘ç¯å¢ƒäºŒ</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2019.07.12</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>hzzly</span>
        </span>
      

      


      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <h2 id="ç‰ˆæœ¬"><a href="#ç‰ˆæœ¬" class="headerlink" title="ç‰ˆæœ¬"></a>ç‰ˆæœ¬</h2><ul>
<li>webpack 4</li>
<li>Babel 7</li>
</ul>
<blockquote>
<p>æœ¬ç¯‡ä¸»è¦ä½¿ç”¨é’ˆå¯¹ä¸Šç¯‡çš„webpacké…ç½®è¿›è¡Œä¼˜åŒ–</p>
</blockquote>
<h3 id="å¿«é€Ÿæµè§ˆï¼š"><a href="#å¿«é€Ÿæµè§ˆï¼š" class="headerlink" title="å¿«é€Ÿæµè§ˆï¼š"></a>å¿«é€Ÿæµè§ˆï¼š</h3><ul>
<li><a href="http://hjingren.cn/2019/07/11/%E5%8A%A8%E6%89%8B%E6%90%AD%E5%BB%BAreact%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B8%80/" target="_blank" rel="noopener">webpackåŸºç¡€ç¯‡</a></li>
</ul>
<h2 id="webpackä¼˜åŒ–"><a href="#webpackä¼˜åŒ–" class="headerlink" title="webpackä¼˜åŒ–"></a>webpackä¼˜åŒ–</h2><h3 id="1ã€æŠ½å–cssï¼ˆMiniCssExtractPluginï¼‰"><a href="#1ã€æŠ½å–cssï¼ˆMiniCssExtractPluginï¼‰" class="headerlink" title="1ã€æŠ½å–cssï¼ˆMiniCssExtractPluginï¼‰"></a>1ã€æŠ½å–cssï¼ˆMiniCssExtractPluginï¼‰</h3><p>ä¸ºæ¯ä¸ªå¼•å…¥ CSS çš„ JS æ–‡ä»¶åˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œæé«˜é¦–é¡µåŠ è½½é€Ÿåº¦</p>
<ul>
<li>æŠŠ style-loader æ›¿æ¢æˆ MiniCssExtractPlugin.loader</li>
<li>æ–°å¢ plugins</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add mini-css-extract-plugin -D</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...åŒä¸Š</span></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(sc|sa|c)ss$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="comment">// 'style-loader',</span></span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          <span class="comment">// ...åŒä¸Š</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'[name].[hash].css'</span>,</span><br><span class="line">      chunkFilename: <span class="string">'[id].[hash].css'</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2ã€å‹ç¼©CSSï¼ˆOptimizeCssAssetsWebpackPluginï¼‰"><a href="#2ã€å‹ç¼©CSSï¼ˆOptimizeCssAssetsWebpackPluginï¼‰" class="headerlink" title="2ã€å‹ç¼©CSSï¼ˆOptimizeCssAssetsWebpackPluginï¼‰"></a>2ã€å‹ç¼©CSSï¼ˆOptimizeCssAssetsWebpackPluginï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add optimize-css-assets-webpack-plugin -D</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OptimizeCssAssetsWebpackPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...åŒä¸Š</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> OptimizeCssAssetsWebpackPlugin(),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3ã€å‹ç¼©JS"><a href="#3ã€å‹ç¼©JS" class="headerlink" title="3ã€å‹ç¼©JS"></a>3ã€å‹ç¼©JS</h3><p>webpack 4åªè¦åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œ ä»£ç å°±ä¼šè‡ªåŠ¨å‹ç¼©<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mode: <span class="string">'production'</span>,</span><br></pre></td></tr></table></figure></p>
<h3 id="4ã€ä»£ç åˆ†å‰²ï¼ˆSplitChunksPluginï¼‰"><a href="#4ã€ä»£ç åˆ†å‰²ï¼ˆSplitChunksPluginï¼‰" class="headerlink" title="4ã€ä»£ç åˆ†å‰²ï¼ˆSplitChunksPluginï¼‰"></a>4ã€ä»£ç åˆ†å‰²ï¼ˆSplitChunksPluginï¼‰</h3><p>ä»£ç åˆ†å‰²ï¼Œå•ç‹¬æ‰“åŒ…ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…æ‰€æœ‰é¡µé¢åªç”Ÿæˆä¸€ä¸ªjsæ–‡ä»¶ï¼Œé¦–å±åŠ è½½å¾ˆæ…¢çš„æƒ…å†µã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      chunks: <span class="string">'all'</span>,   <span class="comment">// include all types of chunks</span></span><br><span class="line">      <span class="comment">// minSize: 30000,   // å¼•å…¥çš„åº“å¤§äº30kbæ—¶æ‰ä¼šåšä»£ç åˆ†å‰²</span></span><br><span class="line">      <span class="comment">// minChunks: 1,     // ä¸€ä¸ªæ¨¡å—è‡³å°‘è¢«ç”¨äº†1æ¬¡æ‰ä¼šè¢«åˆ†å‰²</span></span><br><span class="line">      <span class="comment">// maxAsyncRequests: 5,     // åŒæ—¶å¼‚æ­¥åŠ è½½çš„æ¨¡å—æ•°æœ€å¤šæ˜¯5ä¸ªï¼Œå¦‚æœè¶…è¿‡5ä¸ªåˆ™ä¸åšä»£ç åˆ†å‰²</span></span><br><span class="line">      <span class="comment">// maxInitialRequests: 3,   // å…¥å£æ–‡ä»¶è¿›è¡ŒåŠ è½½æ—¶ï¼Œå¼•å…¥çš„åº“æœ€å¤šåˆ†å‰²å‡º3ä¸ªjsæ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// automaticNameDelimiter: '~',  // ç”Ÿæˆæ–‡ä»¶åçš„æ–‡ä»¶é“¾æ¥ç¬¦</span></span><br><span class="line">      <span class="comment">// name: true,   // å¼€å¯è‡ªå®šä¹‰åç§°æ•ˆæœ</span></span><br><span class="line">      <span class="comment">// cacheGroups: &#123;  // åˆ¤æ–­åˆ†å‰²å‡ºçš„ä»£ç æ”¾åˆ°é‚£é‡Œå»</span></span><br><span class="line">      <span class="comment">//   vendors: &#123;   // é…åˆchunksï¼šâ€˜allâ€™ä½¿ç”¨ï¼Œè¡¨ç¤ºå¦‚æœå¼•å…¥çš„åº“æ˜¯åœ¨node-modulesä¸­ï¼Œé‚£å°±ä¼šæŠŠè¿™ä¸ªåº“åˆ†å‰²å‡ºæ¥å¹¶èµ·åä¸ºvendors.js</span></span><br><span class="line">      <span class="comment">//     test: /[\/]node_modules[\/]/,</span></span><br><span class="line">      <span class="comment">//     priority: -10,</span></span><br><span class="line">      <span class="comment">//     filename: 'vendors.js'</span></span><br><span class="line">      <span class="comment">//   &#125;,</span></span><br><span class="line">      <span class="comment">//   default: &#123;  // ä¸ºénode-modulesåº“ä¸­åˆ†å‰²å‡ºçš„ä»£ç è®¾ç½®é»˜è®¤å­˜æ”¾åç§°</span></span><br><span class="line">      <span class="comment">//     priority: -20,</span></span><br><span class="line">      <span class="comment">//     reuseExistingChunk: true, // é¿å…è¢«é‡å¤æ‰“åŒ…åˆ†å‰²</span></span><br><span class="line">      <span class="comment">//     filename: 'common.js'</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="5ã€é…ç½®å…¨å±€å˜é‡"><a href="#5ã€é…ç½®å…¨å±€å˜é‡" class="headerlink" title="5ã€é…ç½®å…¨å±€å˜é‡"></a>5ã€é…ç½®å…¨å±€å˜é‡</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...åŒä¸Š</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">	    <span class="string">'process.env.NODE_ENV'</span>: <span class="built_in">JSON</span>.stringify(<span class="string">'development'</span>),</span><br><span class="line">	 	&#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ğŸ”¥Tip1 é—®é¢˜ï¼šå½“ç”¨ DefinePlugin æ¥é…ç½®å…¨å±€å˜é‡æ—¶ï¼Œåªç»™ä¾èµ–ä¸­æ³¨å…¥äº†ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå°±æ˜¯srcæ–‡ä»¶å¤¹ä¸‹é¢çš„å’Œä¾èµ–çš„æ¨¡å—ã€‚å½“æˆ‘ä»¬åœ¨webpacké…ç½®æ–‡ä»¶ä¸­å»å– process.env.NODE_ENV ä¾ç„¶æ˜¯ undefinedã€‚</p>
<blockquote>
<p>è§£å†³ï¼šåœ¨package.jsonå‘½ä»¤ä¸­æ³¨å…¥<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "start": "webpack-dev-server NODE_ENV=development --config ./build/webpack.config.js",</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="6ã€CSS-Tree-Shaking"><a href="#6ã€CSS-Tree-Shaking" class="headerlink" title="6ã€CSS Tree Shaking"></a>6ã€CSS Tree Shaking</h3><p>å»é™¤é¡¹ç›®ä»£ç ä¸­ç”¨ä¸åˆ°çš„ CSS æ ·å¼ï¼Œä»…ä¿ç•™è¢«ä½¿ç”¨çš„æ ·å¼ä»£ç </p>
<p>ğŸ”¥Tip2 é—®é¢˜ï¼šå½“ä½¿ç”¨ CSS Tree Shaking çš„æ—¶å€™ï¼Œéœ€è¦æŠŠ css-modules å…³é—­ï¼Œä¸ç„¶ css ä¼šè¢«å…¨éƒ¨æ¸…é™¤æ‰ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add glob-all purify-css purifycss-webpack -D</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PurifyCSS = <span class="built_in">require</span>(<span class="string">"purifycss-webpack"</span>);</span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">"glob-all"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...åŒä¸Š</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> PurifyCSS(&#123;</span><br><span class="line">      paths: glob.sync([</span><br><span class="line">        <span class="comment">// è¦åšCSS Tree Shakingçš„è·¯å¾„æ–‡ä»¶</span></span><br><span class="line">        path.resolve(__dirname, <span class="string">"../public/*.html"</span>), <span class="comment">// è¯·æ³¨æ„ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦å¯¹ html æ–‡ä»¶è¿›è¡Œ tree shaking</span></span><br><span class="line">        path.resolve(__dirname, <span class="string">"../src/*.js"</span>)</span><br><span class="line">      ])</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7ã€JS-Tree-Shaking"><a href="#7ã€JS-Tree-Shaking" class="headerlink" title="7ã€JS Tree Shaking"></a>7ã€JS Tree Shaking</h3><p>æ¸…é™¤åˆ°ä»£ç ä¸­æ— ç”¨çš„jsä»£ç ï¼Œåªæ”¯æŒimportæ–¹å¼å¼•å…¥ï¼Œä¸æ”¯æŒcommonjsçš„æ–¹å¼å¼•å…¥</p>
<p>webpack 4åªè¦åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œ tree shakingå°±ä¼šç”Ÿæ•ˆã€‚</p>
<h3 id="8ã€resolveï¼ˆè§£æï¼‰"><a href="#8ã€resolveï¼ˆè§£æï¼‰" class="headerlink" title="8ã€resolveï¼ˆè§£æï¼‰"></a>8ã€resolveï¼ˆè§£æï¼‰</h3><p>èƒ½è®¾ç½®æ¨¡å—å¦‚ä½•è¢«è§£æã€‚</p>
<ul>
<li>extension: æŒ‡å®šextensionä¹‹åå¯ä»¥ä¸ç”¨åœ¨requireæˆ–æ˜¯importçš„æ—¶å€™åŠ æ–‡ä»¶æ‰©å±•å,ä¼šä¾æ¬¡å°è¯•æ·»åŠ æ‰©å±•åè¿›è¡ŒåŒ¹é…</li>
<li>alias: é…ç½®åˆ«åå¯ä»¥åŠ å¿«webpackæŸ¥æ‰¾æ¨¡å—çš„é€Ÿåº¦</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...åŒä¸Š</span></span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">'.js'</span>, <span class="string">'.jsx'</span>],</span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">'@'</span>: path.join(__dirname, <span class="string">'../src'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9ã€æ¨¡å—çƒ­æ›¿æ¢HMR"><a href="#9ã€æ¨¡å—çƒ­æ›¿æ¢HMR" class="headerlink" title="9ã€æ¨¡å—çƒ­æ›¿æ¢HMR"></a>9ã€æ¨¡å—çƒ­æ›¿æ¢HMR</h3><p>æ¨¡å—çƒ­æ›¿æ¢ä¹Ÿç§°ä¸ºHMRï¼Œä»£ç æ›´æ–°æ—¶åªä¼šæ›´æ–°è¢«ä¿®æ”¹éƒ¨åˆ†éƒ½æ˜¾ç¤ºã€‚æœ‰å¦‚ä¸‹æœ‰ç‚¹</p>
<ul>
<li>é’ˆå¯¹äºæ ·å¼è°ƒè¯•æ›´åŠ æ–¹ä¾¿</li>
<li>åªä¼šæ›´æ–°è¢«ä¿®æ”¹ä»£ç çš„é‚£éƒ¨åˆ†æ˜¾ç¤ºï¼Œæå‡å¼€å‘æ•ˆç‡</li>
<li>ä¿ç•™åœ¨å®Œå…¨é‡æ–°åŠ è½½é¡µé¢æ—¶ä¸¢å¤±çš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨Node.jsçš„æ–¹å¼å®ç°</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yarn add express webpack-dev-middleware webpack-hot-middleware react-hot-loader cross-env -D</span><br><span class="line"> </span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">touch dev-server.js</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dev-server.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">const</span> webpackDevMiddleware = <span class="built_in">require</span>(<span class="string">'webpack-dev-middleware'</span>);</span><br><span class="line"><span class="keyword">const</span> webpackHotMiddleware = <span class="built_in">require</span>(<span class="string">"webpack-hot-middleware"</span>)</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'./webpack.config.js'</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> complier = webpack(config);   <span class="comment">// ç¼–è¯‘å™¨ï¼Œç¼–è¯‘å™¨æ‰§è¡Œä¸€æ¬¡å°±ä¼šé‡æ–°æ‰“åŒ…ä¸€ä¸‹ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> app = express();  <span class="comment">// ç”Ÿæˆä¸€ä¸ªå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> DIST_DIR = path.resolve(__dirname, <span class="string">'../'</span>, <span class="string">'dist'</span>);  <span class="comment">// è®¾ç½®é™æ€è®¿é—®æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="built_in">parseInt</span>(process.env.PORT, <span class="number">10</span>) || <span class="number">8586</span>;</span><br><span class="line"><span class="keyword">const</span> host = process.env.HOST || <span class="string">'localhost'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> devMiddleware = webpackDevMiddleware(complier, &#123;</span><br><span class="line">  quiet: <span class="literal">true</span>,</span><br><span class="line">  noInfo: <span class="literal">true</span>,</span><br><span class="line">  stats: <span class="string">'minimal'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> hotMiddleware = webpackHotMiddleware(complier, &#123;</span><br><span class="line">  log: <span class="literal">false</span>,</span><br><span class="line">  heartbeat: <span class="number">2000</span></span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">app.use(devMiddleware)</span><br><span class="line">app.use(hotMiddleware)</span><br><span class="line"><span class="comment">// è®¾ç½®è®¿é—®é™æ€æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line">app.use(express.static(DIST_DIR))</span><br><span class="line"></span><br><span class="line">app.listen(port, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`App running at: http://<span class="subst">$&#123;host&#125;</span>:<span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;)  <span class="comment">//ç›‘å¬ç«¯å£</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹webpack.config.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> isDev = process.env.NODE_ENV === <span class="string">'development'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">		main: [</span><br><span class="line">			<span class="string">'webpack-hot-middleware/client?noInfo=true&amp;reload=true'</span>,</span><br><span class="line">			<span class="string">'./src/index.js'</span></span><br><span class="line">		]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(sc|sa|c)ss$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          isDev ? <span class="string">'style-loader'</span> : MiniCssExtractPlugin.loader,</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'css-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              modules: &#123;</span><br><span class="line">                localIdentName: <span class="string">'[local]_[hash:base64:5]'</span>,</span><br><span class="line">              &#125;,</span><br><span class="line">              sourceMap: !isDev &amp;&amp; <span class="literal">true</span>, <span class="comment">// å¼€å‘æ—¶åˆ·æ–°ä¼šå¯¼è‡´é—ªå±ï¼ˆæ ·å¼åŠ è½½æ…¢ä¸€æ­¥ï¼‰</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">'postcss-loader'</span>, <span class="comment">// ä½¿ç”¨ postcss ä¸º css åŠ ä¸Šæµè§ˆå™¨å‰ç¼€</span></span><br><span class="line">          <span class="string">'sass-loader'</span>, <span class="comment">// ç¼–è¯‘scss</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.NamedModulesPlugin(), <span class="comment">// ç”¨äºå¯åŠ¨HMRæ—¶å¯ä»¥æ˜¾ç¤ºæ¨¡å—çš„ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">		<span class="keyword">new</span> webpack.HotModuleReplacementPlugin(), <span class="comment">// å¼€å¯HMR(çƒ­æ›¿æ¢åŠŸèƒ½,æ›¿æ¢æ›´æ–°éƒ¨åˆ†,ä¸é‡è½½é¡µé¢ï¼) ç›¸å½“äºåœ¨å‘½ä»¤è¡ŒåŠ  --hot</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹å…¥å£æ–‡ä»¶index.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppContainer &#125; <span class="keyword">from</span> <span class="string">'react-hot-loader'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'./router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ReactDOM.render(</span><br><span class="line">    &lt;AppContainer&gt;</span><br><span class="line">      &lt;BrowserRouter&gt;</span><br><span class="line">        &lt;Router /&gt;</span><br><span class="line">      &lt;<span class="regexp">/BrowserRouter&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>AppContainer&gt;,</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆå§‹åŒ– */</span></span><br><span class="line">render();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* çƒ­æ›´æ–° */</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">  <span class="built_in">module</span>.hot.accept(<span class="string">'./router/index.js'</span>, () =&gt; &#123;</span><br><span class="line">    render();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹scriptå‘½ä»¤è¡Œ<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"start": "cross-env NODE_ENV=development node ./build/dev-server.js",</span><br></pre></td></tr></table></figure></p>
<p>okï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ä»£ç æ—¶ï¼Œé¡µé¢å°±ä¸éœ€è¦åˆ·æ–°äº†ï¼Œè€Œæ˜¯ç›´æ¥æ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ã€‚</p>
<h3 id="10ã€BundleAnalyzerPlugin"><a href="#10ã€BundleAnalyzerPlugin" class="headerlink" title="10ã€BundleAnalyzerPlugin"></a>10ã€BundleAnalyzerPlugin</h3><p>ä½¿ç”¨äº¤äº’å¼å¯ç¼©æ”¾æ ‘å½¢å›¾å¯è§†åŒ–webpackè¾“å‡ºæ–‡ä»¶çš„å¤§å°ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬é’ˆå¯¹ä»£ç ä¾èµ–çš„å¤§å°è¿›è¡Œä¼˜åŒ–ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpack-bundle-analyzer -D</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BundleAnalyzerPlugin = <span class="built_in">require</span>(<span class="string">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//...åŒä¸Š</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> BundleAnalyzerPlugin(&#123;</span><br><span class="line">      analyzerMode: <span class="string">'server'</span>,</span><br><span class="line">      analyzerHost: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">      analyzerPort: <span class="number">8889</span>,</span><br><span class="line">      reportFilename: <span class="string">'report.html'</span>,</span><br><span class="line">      defaultSizes: <span class="string">'parsed'</span>,</span><br><span class="line">      openAnalyzer: <span class="literal">true</span>,</span><br><span class="line">      generateStatsFile: <span class="literal">false</span>,</span><br><span class="line">      statsFilename: <span class="string">'stats.json'</span>,</span><br><span class="line">      statsOptions: <span class="literal">null</span>,</span><br><span class="line">      logLevel: <span class="string">'info'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// package.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"script"</span>: &#123;</span><br><span class="line">    <span class="attr">"analyz"</span>: <span class="string">"cross-env NODE_ENV=production npm_config_report=true npm run build"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="webpackåˆ†ç¦»é…ç½®æ–‡ä»¶"><a href="#webpackåˆ†ç¦»é…ç½®æ–‡ä»¶" class="headerlink" title="webpackåˆ†ç¦»é…ç½®æ–‡ä»¶"></a>webpackåˆ†ç¦»é…ç½®æ–‡ä»¶</h2><p>é’ˆå¯¹å¼€å‘ç¯å¢ƒå’Œå‘å¸ƒç¯å¢ƒé…ç½®å¯¹åº”çš„webpackï¼Œå…¬å…±çš„éƒ¨åˆ†æå–å‡ºæ¥ï¼Œå†ä½¿ç”¨ webpack-merge æ¥å°†ä¸åŒç¯å¢ƒä¸‹çš„é…ç½®åˆå¹¶èµ·æ¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">touch webpack.base.conf.js</span><br><span class="line">touch webpack.dev.conf.js</span><br><span class="line">touch webpack.prd.conf.js</span><br><span class="line"> </span><br><span class="line">yarn add webpack-merge -D</span><br></pre></td></tr></table></figure>
<h3 id="1ã€æå–å…¬å…±é…ç½®"><a href="#1ã€æå–å…¬å…±é…ç½®" class="headerlink" title="1ã€æå–å…¬å…±é…ç½®"></a>1ã€æå–å…¬å…±é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.base.conf.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isDev = process.env.NODE_ENV === <span class="string">'development'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: [<span class="string">'./src/index.js'</span>],</span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// è¾“å‡ºç›®å½•</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'../dist'</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    <span class="comment">// ...åŒwebpack.config.jsçš„modules</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'index.html'</span>, <span class="comment">// æœ€ç»ˆåˆ›å»ºçš„æ–‡ä»¶å</span></span><br><span class="line">      template: path.join(__dirname, <span class="string">'../public/index.html'</span>), <span class="comment">// æŒ‡å®šæ¨¡æ¿è·¯å¾„</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">'.js'</span>, <span class="string">'.jsx'</span>],</span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">'@'</span>: path.join(__dirname, <span class="string">'../src'</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      <span class="comment">// ä»£ç åˆ†å‰²æŒ‰éœ€åŠ è½½ã€æå–å…¬å…±ä»£ç </span></span><br><span class="line">      chunks: <span class="string">'all'</span>, <span class="comment">// æ‰€æœ‰çš„ chunks ä»£ç å…¬å…±çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  performance: <span class="literal">false</span>, <span class="comment">// å…³é—­æ€§èƒ½æç¤º</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="2ã€é…ç½®å¼€å‘ç¯å¢ƒ"><a href="#2ã€é…ç½®å¼€å‘ç¯å¢ƒ" class="headerlink" title="2ã€é…ç½®å¼€å‘ç¯å¢ƒ"></a>2ã€é…ç½®å¼€å‘ç¯å¢ƒ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.dev.conf.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> commonConfig = <span class="built_in">require</span>(<span class="string">'./webpack.base.conf.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(commonConfig, &#123;</span><br><span class="line">	mode: <span class="string">"development"</span>,</span><br><span class="line">	devtool: <span class="string">'cheap-module-eval-soure-map'</span>,</span><br><span class="line">	entry: &#123;</span><br><span class="line">		<span class="comment">//å®ç°åˆ·æ–°æµè§ˆå™¨webpack-hot-middleware/client?noInfo=true&amp;reload=true æ˜¯å¿…å¡«çš„</span></span><br><span class="line">		main: [</span><br><span class="line">			<span class="string">'webpack-hot-middleware/client?noInfo=true&amp;reload=true'</span>,</span><br><span class="line">			<span class="string">'./src/index.js'</span></span><br><span class="line">		]</span><br><span class="line">	&#125;,</span><br><span class="line">	output: &#123;</span><br><span class="line">		<span class="comment">// è¾“å‡ºç›®å½•</span></span><br><span class="line">		path: path.resolve(__dirname, <span class="string">"../dist"</span>),</span><br><span class="line">    <span class="comment">// æ–‡ä»¶åç§°</span></span><br><span class="line">    filename: <span class="string">"bundle.[name].[hash].js"</span>,</span><br><span class="line">		chunkFilename: <span class="string">'[name].[hash].js'</span></span><br><span class="line">	&#125;,</span><br><span class="line">	plugins: [</span><br><span class="line">		<span class="keyword">new</span> webpack.NamedModulesPlugin(),</span><br><span class="line">		<span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class="line">		<span class="comment">// new webpack.DefinePlugin(&#123;</span></span><br><span class="line">		<span class="comment">// 	'process.env.NODE_ENV': JSON.stringify('development'),</span></span><br><span class="line">	 	<span class="comment">// &#125;),</span></span><br><span class="line">	],</span><br><span class="line">	devServer: &#123;</span><br><span class="line">		hot: <span class="literal">true</span>,</span><br><span class="line">		contentBase: path.resolve(__dirname, <span class="string">"../dist"</span>),</span><br><span class="line">		host: <span class="string">"localhost"</span>,</span><br><span class="line">		port: <span class="number">8586</span>,</span><br><span class="line">		historyApiFallback: <span class="literal">true</span>, <span class="comment">// è¯¥é€‰é¡¹çš„ä½œç”¨æ‰€æœ‰çš„404éƒ½è¿æ¥åˆ°index.html</span></span><br><span class="line">		proxy: &#123;</span><br><span class="line">			<span class="comment">// ä»£ç†åˆ°åç«¯çš„æœåŠ¡åœ°å€</span></span><br><span class="line">			<span class="comment">// "/api": "http://localhost:3000"</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="3ã€é…ç½®å‘å¸ƒç¯å¢ƒ"><a href="#3ã€é…ç½®å‘å¸ƒç¯å¢ƒ" class="headerlink" title="3ã€é…ç½®å‘å¸ƒç¯å¢ƒ"></a>3ã€é…ç½®å‘å¸ƒç¯å¢ƒ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.prd.conf.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> commonConfig = <span class="built_in">require</span>(<span class="string">'./webpack.base.conf.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(commonConfig, &#123;</span><br><span class="line">  mode: <span class="string">'production'</span>,</span><br><span class="line">  devtool: <span class="string">'cheap-module-source-map'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    publicPath: <span class="string">'/'</span>, <span class="comment">// æ‰“åŒ…è·¯å¾„</span></span><br><span class="line">    <span class="comment">// è¾“å‡ºç›®å½•</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'../dist'</span>),</span><br><span class="line">    <span class="comment">// æ–‡ä»¶åç§°</span></span><br><span class="line">    filename: <span class="string">'bundle.[name].[hash].js'</span>,</span><br><span class="line">    chunkFilename: <span class="string">'[name].[hash].js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    usedExports: <span class="literal">true</span>,</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      chunks: <span class="string">'all'</span>, <span class="comment">// æ‰€æœ‰çš„ chunks ä»£ç å…¬å…±çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶</span></span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        <span class="comment">// å…¬å…±ä»£ç æ‰“åŒ…åˆ†ç»„é…ç½®</span></span><br><span class="line">        vendors: &#123;</span><br><span class="line">          test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          name: <span class="string">'vendors'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'[name].[hash].css'</span>,</span><br><span class="line">      chunkFilename: <span class="string">'[id].[hash].css'</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// new webpack.DefinePlugin(&#123;</span></span><br><span class="line">    <span class="comment">//   'process.env.NODE_ENV': JSON.stringify('production'),</span></span><br><span class="line">    <span class="comment">// &#125;),</span></span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="4ã€ä¿®æ”¹scriptå‘½ä»¤è¡Œ"><a href="#4ã€ä¿®æ”¹scriptå‘½ä»¤è¡Œ" class="headerlink" title="4ã€ä¿®æ”¹scriptå‘½ä»¤è¡Œ"></a>4ã€ä¿®æ”¹scriptå‘½ä»¤è¡Œ</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"start": "cross-env NODE_ENV=development node ./build/dev-server.js",</span><br><span class="line">"build": "cross-env NODE_ENV=production webpack --config ./build/webpack.prod.conf.js",</span><br></pre></td></tr></table></figure>
<p>å†™åˆ°è¿™é‡Œï¼Œä¸€ä¸ªåŸºæœ¬çš„Reactå¼€å‘ç¯å¢ƒä¹Ÿå°±æ­èµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥é’ˆå¯¹ä»£ç æˆ–è€…å¼€å‘æ•ˆç‡è¿›è¡Œä¼˜åŒ–ã€‚</p>

    
  </div>

</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">æ”¯æŒä¸€ä¸‹</span>
      <div class="donation-body">
        <div class="tip text-center">æ‰«ä¸€æ‰«ï¼Œæ”¯æŒhzzly</div>
        <ul>
        
          <li class="item">
            
              <span>å¾®ä¿¡æ‰«ä¸€æ‰«</span>
            
            <img src="" alt="">
          </li>
        
          <li class="item">
            
              <span>æ”¯ä»˜å®æ‰«ä¸€æ‰«</span>
            
            <img src="" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2019/07/11/åŠ¨æ‰‹æ­å»ºreactå¼€å‘ç¯å¢ƒä¸€/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2019/07/15/åŠ¨æ‰‹æ­å»ºreactå¼€å‘ç¯å¢ƒä¸‰/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">å…³é—­</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/archives/" rel="noopener noreferrer" target="_self">
              åšå®¢
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/tag/" rel="noopener noreferrer" target="_self">
              æ ‡ç­¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/link/" rel="noopener noreferrer" target="_self">
              å‹é“¾
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/about/" rel="noopener noreferrer" target="_self">
              å…³äº
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/atom.xml" rel="noopener noreferrer" target="_blank">
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/search/" rel="noopener noreferrer" target="_self">
              æœç´¢
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
